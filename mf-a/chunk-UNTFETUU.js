function O(e){var r=function(o){Error.call(o),o.stack=new Error().stack},t=e(r);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var b=O(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(o,n){return n+1+") "+o.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});import{__read as C,__spreadArray as I,__values as D}from"tslib";function c(e){return typeof e=="function"}function E(e,r){if(e){var t=e.indexOf(r);0<=t&&e.splice(t,1)}}var v=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,t,o,n,i;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var s=D(u),p=s.next();!p.done;p=s.next()){var K=p.value;K.remove(this)}}catch(a){r={error:a}}finally{try{p&&!p.done&&(t=s.return)&&t.call(s)}finally{if(r)throw r.error}}else u.remove(this);var U=this.initialTeardown;if(c(U))try{U()}catch(a){i=a instanceof b?a.errors:[a]}var F=this._finalizers;if(F){this._finalizers=null;try{for(var m=D(F),h=m.next();!h.done;h=m.next()){var Q=h.value;try{M(Q)}catch(a){i=i??[],a instanceof b?i=I(I([],C(i)),C(a.errors)):i.push(a)}}}catch(a){o={error:a}}finally{try{h&&!h.done&&(n=m.return)&&n.call(m)}finally{if(o)throw o.error}}}if(i)throw new b(i)}},e.prototype.add=function(r){var t;if(r&&r!==this)if(this.closed)M(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(r)}},e.prototype._hasParent=function(r){var t=this._parentage;return t===r||Array.isArray(t)&&t.includes(r)},e.prototype._addParent=function(r){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(r),t):t?[t,r]:r},e.prototype._removeParent=function(r){var t=this._parentage;t===r?this._parentage=null:Array.isArray(t)&&E(t,r)},e.prototype.remove=function(r){var t=this._finalizers;t&&E(t,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}();var fr=v.EMPTY;function y(e){return e instanceof v||e&&"closed"in e&&c(e.remove)&&c(e.add)&&c(e.unsubscribe)}function M(e){c(e)?e():e.unsubscribe()}var f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};function g(){}import{__extends as V}from"tslib";import{__read as H,__spreadArray as R}from"tslib";var d={setTimeout:function(e,r){for(var t=[],o=2;o<arguments.length;o++)t[o-2]=arguments[o];var n=d.delegate;return n?.setTimeout?n.setTimeout.apply(n,R([e,r],H(t))):setTimeout.apply(void 0,R([e,r],H(t)))},clearTimeout:function(e){var r=d.delegate;return(r?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Y(e){d.setTimeout(function(){var r=f.onUnhandledError;if(r)r(e);else throw e})}var N=function(){return T("C",void 0,void 0)}();function j(e){return T("E",void 0,e)}function k(e){return T("N",e,void 0)}function T(e,r,t){return{kind:e,value:r,error:t}}var l=null;function B(e){if(f.useDeprecatedSynchronousErrorHandling){var r=!l;if(r&&(l={errorThrown:!1,error:null}),e(),r){var t=l,o=t.errorThrown,n=t.error;if(l=null,o)throw n}}else e()}function L(e){f.useDeprecatedSynchronousErrorHandling&&l&&(l.errorThrown=!0,l.error=e)}var A=function(e){V(r,e);function r(t){var o=e.call(this)||this;return o.isStopped=!1,t?(o.destination=t,y(t)&&t.add(o)):o.destination=$,o}return r.create=function(t,o,n){return new x(t,o,n)},r.prototype.next=function(t){this.isStopped?_(k(t),this):this._next(t)},r.prototype.error=function(t){this.isStopped?_(j(t),this):(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped?_(N,this):(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(v);var W=Function.prototype.bind;function P(e,r){return W.call(e,r)}var X=function(){function e(r){this.partialObserver=r}return e.prototype.next=function(r){var t=this.partialObserver;if(t.next)try{t.next(r)}catch(o){S(o)}},e.prototype.error=function(r){var t=this.partialObserver;if(t.error)try{t.error(r)}catch(o){S(o)}else S(r)},e.prototype.complete=function(){var r=this.partialObserver;if(r.complete)try{r.complete()}catch(t){S(t)}},e}(),x=function(e){V(r,e);function r(t,o,n){var i=e.call(this)||this,u;if(c(t)||!t)u={next:t??void 0,error:o??void 0,complete:n??void 0};else{var s;i&&f.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=function(){return i.unsubscribe()},u={next:t.next&&P(t.next,s),error:t.error&&P(t.error,s),complete:t.complete&&P(t.complete,s)}):u=t}return i.destination=new X(u),i}return r}(A);function S(e){f.useDeprecatedSynchronousErrorHandling?L(e):Y(e)}function Z(e){throw e}function _(e,r){var t=f.onStoppedNotification;t&&d.setTimeout(function(){return t(e,r)})}var $={closed:!0,next:g,error:Z,complete:g};var q=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function G(e){return e}function Hr(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return w(e)}function w(e){return e.length===0?G:e.length===1?e[0]:function(t){return e.reduce(function(o,n){return n(o)},t)}}var qr=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var t=new e;return t.source=this,t.operator=r,t},e.prototype.subscribe=function(r,t,o){var n=this,i=rr(r)?r:new x(r,t,o);return B(function(){var u=n,s=u.operator,p=u.source;i.add(s?s.call(i,p):p?n._subscribe(i):n._trySubscribe(i))}),i},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(t){r.error(t)}},e.prototype.forEach=function(r,t){var o=this;return t=J(t),new t(function(n,i){var u=new x({next:function(s){try{r(s)}catch(p){i(p),u.unsubscribe()}},error:i,complete:n});o.subscribe(u)})},e.prototype._subscribe=function(r){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(r)},e.prototype[q]=function(){return this},e.prototype.pipe=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return w(r)(this)},e.prototype.toPromise=function(r){var t=this;return r=J(r),new r(function(o,n){var i;t.subscribe(function(u){return i=u},function(u){return n(u)},function(){return o(i)})})},e.create=function(r){return new e(r)},e}();function J(e){var r;return(r=e??f.Promise)!==null&&r!==void 0?r:Promise}function z(e){return e&&c(e.next)&&c(e.error)&&c(e.complete)}function rr(e){return e&&e instanceof A||z(e)&&y(e)}export{c as a,O as b,b as c,E as d,v as e,fr as f,f as g,d as h,Y as i,g as j,N as k,j as l,k as m,B as n,A as o,x as p,q,G as r,Hr as s,qr as t};

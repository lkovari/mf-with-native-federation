import{a as W}from"./chunk-3RP6GD4A.js";import"./chunk-QEB6MTLB.js";import"./chunk-X2IYAD47.js";import{b as g,t as z}from"./chunk-UNTFETUU.js";import"./chunk-4CLCTAJ7.js";import{__assign as O}from"tslib";function T(e){switch(e.responseType){case"json":{if("response"in e)return e.response;var t=e;return JSON.parse(t.responseText)}case"document":return e.responseXML;case"text":default:{if("response"in e)return e.response;var t=e;return t.responseText}}}var L=function(){function e(t,r,l,u){u===void 0&&(u="download_load"),this.originalEvent=t,this.xhr=r,this.request=l,this.type=u;var d=r.status,w=r.responseType;this.status=d??0,this.responseType=w??"";var m=r.getAllResponseHeaders();this.responseHeaders=m?m.split(`
`).reduce(function(j,s){var v=s.indexOf(": ");return j[s.slice(0,v)]=s.slice(v+2),j},{}):{},this.response=T(r);var c=t.loaded,h=t.total;this.loaded=c,this.total=h}return e}();var R=g(function(e){return function(r,l,u){this.message=r,this.name="AjaxError",this.xhr=l,this.request=u,this.status=l.status,this.responseType=l.responseType;var d;try{d=T(l)}catch{d=l.responseText}this.response=d}}),H=function(){function e(t,r){return R.call(this,"ajax timeout",t,r),this.name="AjaxTimeoutError",this}return e.prototype=Object.create(R.prototype),e}();function b(e,t){return x({method:"GET",url:e,headers:t})}function ee(e,t,r){return x({method:"POST",url:e,body:t,headers:r})}function te(e,t){return x({method:"DELETE",url:e,headers:t})}function re(e,t,r){return x({method:"PUT",url:e,body:t,headers:r})}function ne(e,t,r){return x({method:"PATCH",url:e,body:t,headers:r})}var oe=W(function(e){return e.response});function ae(e,t){return oe(x({method:"GET",url:e,headers:t}))}var x=function(){var e=function(t){var r=typeof t=="string"?{url:t}:t;return ue(r)};return e.get=b,e.post=ee,e.delete=te,e.put=re,e.patch=ne,e.getJSON=ae,e}(),ie="upload",K="download",P="loadstart",D="progress",Q="load";function ue(e){return new z(function(t){var r,l,u=O({async:!0,crossDomain:!1,withCredentials:!1,method:"GET",timeout:0,responseType:"json"},e),d=u.queryParams,w=u.body,m=u.headers,c=u.url;if(!c)throw new TypeError("url is required");if(d){var h;if(c.includes("?")){var j=c.split("?");if(2<j.length)throw new TypeError("invalid url");h=new URLSearchParams(j[1]),new URLSearchParams(d).forEach(function(a,i){return h.set(i,a)}),c=j[0]+"?"+h}else h=new URLSearchParams(d),c=c+"?"+h}var s={};if(m)for(var v in m)m.hasOwnProperty(v)&&(s[v.toLowerCase()]=m[v]);var C=u.crossDomain;!C&&!("x-requested-with"in s)&&(s["x-requested-with"]="XMLHttpRequest");var Y=u.withCredentials,U=u.xsrfCookieName,B=u.xsrfHeaderName;if((Y||!C)&&U&&B){var N=(l=(r=document?.cookie.match(new RegExp("(^|;\\s*)("+U+")=([^;]*)")))===null||r===void 0?void 0:r.pop())!==null&&l!==void 0?l:"";N&&(s[B]=N)}var A=se(w,s),p=O(O({},u),{url:c,headers:s,body:A}),n;n=e.createXHR?e.createXHR():new XMLHttpRequest;{var o=e.progressSubscriber,X=e.includeDownloadProgress,Z=X===void 0?!1:X,G=e.includeUploadProgress,$=G===void 0?!1:G,F=function(a,i){n.addEventListener(a,function(){var f,y=i();(f=o?.error)===null||f===void 0||f.call(o,y),t.error(y)})};F("timeout",function(){return new H(n,p)}),F("abort",function(){return new R("aborted",n,p)});var J=function(a,i){return new L(i,n,p,a+"_"+i.type)},M=function(a,i,f){a.addEventListener(i,function(y){t.next(J(f,y))})};$&&[P,D,Q].forEach(function(a){return M(n.upload,a,ie)}),o&&[P,D].forEach(function(a){return n.upload.addEventListener(a,function(i){var f;return(f=o?.next)===null||f===void 0?void 0:f.call(o,i)})}),Z&&[P,D].forEach(function(a){return M(n,a,K)});var k=function(a){var i="ajax error"+(a?" "+a:"");t.error(new R(i,n,p))};n.addEventListener("error",function(a){var i;(i=o?.error)===null||i===void 0||i.call(o,a),k()}),n.addEventListener(Q,function(a){var i,f,y=n.status;if(y<400){(i=o?.complete)===null||i===void 0||i.call(o);var V=void 0;try{V=J(K,a)}catch(_){t.error(_);return}t.next(V),t.complete()}else(f=o?.error)===null||f===void 0||f.call(o,a),k(y)})}var S=p.user,I=p.method,E=p.async;S?n.open(I,c,E,S,p.password):n.open(I,c,E),E&&(n.timeout=p.timeout,n.responseType=p.responseType),"withCredentials"in n&&(n.withCredentials=p.withCredentials);for(var v in s)s.hasOwnProperty(v)&&n.setRequestHeader(v,s[v]);return A?n.send(A):n.send(),function(){n&&n.readyState!==4&&n.abort()}})}function se(e,t){var r;if(!e||typeof e=="string"||ve(e)||me(e)||le(e)||de(e)||ce(e)||he(e))return e;if(pe(e))return e.buffer;if(typeof e=="object")return t["content-type"]=(r=t["content-type"])!==null&&r!==void 0?r:"application/json;charset=utf-8",JSON.stringify(e);throw new TypeError("Unknown body type")}var fe=Object.prototype.toString;function q(e,t){return fe.call(e)==="[object "+t+"]"}function le(e){return q(e,"ArrayBuffer")}function de(e){return q(e,"File")}function ce(e){return q(e,"Blob")}function pe(e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(e)}function ve(e){return typeof FormData<"u"&&e instanceof FormData}function me(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function he(e){return typeof ReadableStream<"u"&&e instanceof ReadableStream}export{R as AjaxError,L as AjaxResponse,H as AjaxTimeoutError,x as ajax};

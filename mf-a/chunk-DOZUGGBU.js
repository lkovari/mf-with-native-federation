import{b as c,d as f}from"./chunk-QGAWT764.js";import{e as u}from"./chunk-UNTFETUU.js";import{__extends as v}from"tslib";var k=function(n){v(r,n);function r(e,t){e===void 0&&(e=A),t===void 0&&(t=1/0);var i=n.call(this,e,function(){return i.frame})||this;return i.maxFrames=t,i.frame=0,i.index=-1,i}return r.prototype.flush=function(){for(var e=this,t=e.actions,i=e.maxFrames,a,o;(o=t[0])&&o.delay<=i&&(t.shift(),this.frame=o.delay,!(a=o.execute(o.state,o.delay))););if(a){for(;o=t.shift();)o.unsubscribe();throw a}},r.frameTimeFactor=10,r}(f);var A=function(n){v(r,n);function r(e,t,i){i===void 0&&(i=e.index+=1);var a=n.call(this,e,t)||this;return a.scheduler=e,a.work=t,a.index=i,a.active=!0,a.index=e.index=i,a}return r.prototype.schedule=function(e,t){if(t===void 0&&(t=0),Number.isFinite(t)){if(!this.id)return n.prototype.schedule.call(this,e,t);this.active=!1;var i=new r(this.scheduler,this.work);return this.add(i),i.schedule(e,t)}else return u.EMPTY},r.prototype.requestAsyncId=function(e,t,i){i===void 0&&(i=0),this.delay=e.frame+i;var a=e.actions;return a.push(this),a.sort(r.sortActions),1},r.prototype.recycleAsyncId=function(e,t,i){i===void 0&&(i=0)},r.prototype._execute=function(e,t){if(this.active===!0)return n.prototype._execute.call(this,e,t)},r.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},r}(c);var x={now:function(){return(x.delegate||performance).now()},delegate:void 0};import{__read as p,__spreadArray as h}from"tslib";var d={schedule:function(n){var r=requestAnimationFrame,e=cancelAnimationFrame,t=d.delegate;t&&(r=t.requestAnimationFrame,e=t.cancelAnimationFrame);var i=r(function(a){e=void 0,n(a)});return new u(function(){return e?.(i)})},requestAnimationFrame:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e=d.delegate;return(e?.requestAnimationFrame||requestAnimationFrame).apply(void 0,h([],p(n)))},cancelAnimationFrame:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e=d.delegate;return(e?.cancelAnimationFrame||cancelAnimationFrame).apply(void 0,h([],p(n)))},delegate:void 0};import{__read as F,__spreadArray as w}from"tslib";var I=1,m,l={};function g(n){return n in l?(delete l[n],!0):!1}var s={setImmediate:function(n){var r=I++;return l[r]=!0,m||(m=Promise.resolve()),m.then(function(){return g(r)&&n()}),r},clearImmediate:function(n){g(n)}};var q=s.setImmediate,T=s.clearImmediate,y={setImmediate:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e=y.delegate;return(e?.setImmediate||q).apply(void 0,w([],F(n)))},clearImmediate:function(n){var r=y.delegate;return(r?.clearImmediate||T)(n)},delegate:void 0};export{x as a,d as b,y as c,k as d,A as e};